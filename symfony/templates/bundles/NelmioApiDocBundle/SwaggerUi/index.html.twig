<!DOCTYPE html>
<html>
<head>
    {% block meta %}
        <meta charset="UTF-8">
    {% endblock meta %}
    <title>{% block title %}{{ swagger_data.spec.info.title }}{% endblock title %}</title>

    {% block stylesheets %}
        <link rel="stylesheet" href="{{ asset('bundles/nelmioapidoc/swagger-ui/swagger-ui.css') }}">
        <link rel="stylesheet" href="{{ asset('bundles/nelmioapidoc/style.css') }}">
        <link rel="stylesheet" href="{{ asset('assets/nelmio_api_doc/css/customazok.css') }}">
        <link rel="stylesheet" href="{{ asset('assets/nelmio_api_doc/css/jquery-ui.css') }}">
        <link rel="stylesheet" href="{{ asset('assets/nelmio_api_doc/css/theme.css') }}">
        <link rel="stylesheet" href="{{ asset('assets/nelmio_api_doc/css/tingle.min.css') }}">

        <style>
            .anchor-restart, .anchor-inner {
                font-size: x-large;
                margin-left: 5px;
            }

            .select-css {
                display: block;
                font-size: 16px;
                font-family: sans-serif;
                font-weight: 700;
                color: #444;
                line-height: 1.3;
                padding: .6em 1.4em .5em .8em;
                width: 50%;
                max-width: 100%;
                box-sizing: border-box;
                margin: 0;
                border: 1px solid #aaa;
                box-shadow: 0 1px 0 1px rgba(0, 0, 0, .04);
                border-radius: .5em;
                -moz-appearance: none;
                -webkit-appearance: none;
                appearance: none;
                background-color: #fff;
                background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23007CB2%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E'),
                linear-gradient(to bottom, #ffffff 0%, #e5e5e5 100%);
                background-repeat: no-repeat, repeat;
                background-position: right .7em top 50%, 0 0;
                background-size: .65em auto, 100%;
            }

            .select-css::-ms-expand {
                display: none;
            }

            .select-css:hover {
                border-color: #888;
            }

            .select-css:focus {
                border-color: #aaa;
                box-shadow: 0 0 1px 3px rgba(59, 153, 252, .7);
                box-shadow: 0 0 0 3px -moz-mac-focusring;
                color: #222;
                outline: none;
            }

            .select-css option {
                font-weight: normal;
            }

            .vocabulary {
                margin-right: 22px !important;
            }
        </style>
    {% endblock stylesheets %}

    {% block swagger_data %}
        {# json_encode(65) is for JSON_UNESCAPED_SLASHES|JSON_HEX_TAG to avoid JS XSS #}
        <script id="swagger-data" type="application/json">{{ swagger_data|json_encode(65)|raw }}</script>

    {% endblock swagger_data %}
</head>
<body>
{% block svg_icons %}
    <svg xmlns="http://www.w3.org/2000/svg"
         style="position:absolute;width:0;height:0">
        <defs>
            <symbol viewBox="0 0 20 20" id="unlocked">
                <path d="M15.8 8H14V5.6C14 2.703 12.665 1 10 1 7.334 1 6 2.703 6 5.6V6h2v-.801C8 3.754 8.797 3 10 3c1.203 0 2 .754 2 2.199V8H4c-.553 0-1 .646-1 1.199V17c0 .549.428 1.139.951 1.307l1.197.387C5.672 18.861 6.55 19 7.1 19h5.8c.549 0 1.428-.139 1.951-.307l1.196-.387c.524-.167.953-.757.953-1.306V9.199C17 8.646 16.352 8 15.8 8z"></path>
            </symbol>
            <symbol viewBox="0 0 20 20" id="locked">
                <path d="M15.8 8H14V5.6C14 2.703 12.665 1 10 1 7.334 1 6 2.703 6 5.6V8H4c-.553 0-1 .646-1 1.199V17c0 .549.428 1.139.951 1.307l1.197.387C5.672 18.861 6.55 19 7.1 19h5.8c.549 0 1.428-.139 1.951-.307l1.196-.387c.524-.167.953-.757.953-1.306V9.199C17 8.646 16.352 8 15.8 8zM12 8H8V5.199C8 3.754 8.797 3 10 3c1.203 0 2 .754 2 2.199V8z"></path>
            </symbol>
            <symbol viewBox="0 0 20 20" id="close">
                <path d="M14.348 14.849c-.469.469-1.229.469-1.697 0L10 11.819l-2.651 3.029c-.469.469-1.229.469-1.697 0-.469-.469-.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-.469-.469-.469-1.228 0-1.697.469-.469 1.228-.469 1.697 0L10 8.183l2.651-3.031c.469-.469 1.228-.469 1.697 0 .469.469.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c.469.469.469 1.229 0 1.698z"></path>
            </symbol>
            <symbol viewBox="0 0 20 20" id="large-arrow">
                <path d="M13.25 10L6.109 2.58c-.268-.27-.268-.707 0-.979.268-.27.701-.27.969 0l7.83 7.908c.268.271.268.709 0 .979l-7.83 7.908c-.268.271-.701.27-.969 0-.268-.269-.268-.707 0-.979L13.25 10z"></path>
            </symbol>
            <symbol viewBox="0 0 20 20" id="large-arrow-down">
                <path d="M17.418 6.109c.272-.268.709-.268.979 0s.271.701 0 .969l-7.908 7.83c-.27.268-.707.268-.979 0l-7.908-7.83c-.27-.268-.27-.701 0-.969.271-.268.709-.268.979 0L10 13.25l7.418-7.141z"></path>
            </symbol>
            <symbol viewBox="0 0 24 24" id="jump-to">
                <path d="M19 7v4H5.83l3.58-3.59L8 6l-6 6 6 6 1.41-1.41L5.83 13H21V7z"></path>
            </symbol>
            <symbol viewBox="0 0 24 24" id="expand">
                <path d="M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"></path>
            </symbol>
        </defs>
    </svg>
{% endblock svg_icons %}
<header>
    {% block header %}
        {#<a id="logo" href="#"><img src="{{ asset('bundles/nelmioapidoc/logo.png') }}" alt="NelmioApiDocBundle"></a>#}
    {% endblock header %}
</header>

{% block swagger_ui %}
    <div id="swagger-ui" class="api-platform"></div>
{% endblock %}

{% block javascripts %}
    <script src="{{ asset('assets/nelmio_api_doc/js/fa-all.min.js') }}"></script>
    <script src="{{ asset('bundles/nelmioapidoc/swagger-ui/swagger-ui-bundle.js') }}"></script>
    <script src="{{ asset('bundles/nelmioapidoc/swagger-ui/swagger-ui-standalone-preset.js') }}"></script>
    <script src="{{ asset('assets/nelmio_api_doc/js/jquery.2.2.4.min.js') }}"></script>
    <script src="{{ asset('assets/nelmio_api_doc/js/jquery-modal.0.9.2.js') }}"></script>
    <script src="{{ asset('assets/nelmio_api_doc/js/jquery-ui.1.12.js') }}"></script>
    <script src="{{ asset('assets/nelmio_api_doc/js/tingle.min.js') }}"></script>
{% endblock javascripts %}

{% block swagger_initialization %}
    <script src="{{ asset('bundles/nelmioapidoc/init-swagger-ui.js') }}"></script>
    <script>
        let token = null;
        let debug = {
            'Debug': 'dump',
            'Doctrine': 'db',
            'Exception': 'exception',
            'Validator': 'validator',
            'Form': 'form',
            'Logger': 'logger',
            'Performance': 'time',
            'Request': 'request',
            'Security': 'security',
            'Emails': 'swiftmailer',
        };
        window.onload = () => {
            const data = JSON.parse(document.getElementById('swagger-data').innerText);
            window.ui = SwaggerUIBundle({
                spec: data.spec,
                dom_id: '#swagger-ui',
                docExpansion: 'none',
                validatorUrl: null,
                presets: [
                    SwaggerUIBundle.presets.apis,
                    SwaggerUIStandalonePreset
                ],
                plugins: [
                    SwaggerUIBundle.plugins.DownloadUrl
                ],
                operationsSorter: (a, b) => {
                    let methodsOrder = ["get", "post", "patch", "put", "delete", "options", "trace"];
                    let result = methodsOrder.indexOf(a.get("method")) - methodsOrder.indexOf(b.get("method"));
                    if (result === 0) {
                        result = a.get("path").localeCompare(b.get("path"));
                    }
                    return result;
                },
                layout: 'StandaloneLayout',
                tagsSorter: 'alpha',

                requestInterceptor: (req) => {
                    if (token) {
                        req.headers.Authorization = `Bearer ${token}`
                    }
                },
                responseInterceptor: (res) => {
                    /token/.test(res.url) && 200 === res.status && (token = res.obj.access_token), setTimeout(() => {
                        let debugBlock = $('.col.response-col_description:contains("Response headers")');
                        let token = res.headers["x-debug-token"];
                        localStorage.setItem('token', token);
                        let tok = res.headers["x-debug-token-link"];
                        debugBlock.find('.debug-links').remove();
                        let container = $('<div class="debug-links"><h5>Debug</h5><pre class="microlight">profiler-window: </pre></div>');
                        debugBlock.append(container);
                        Object.keys(debug).forEach((key, index, arr) => {
                            console.log(index);
                            container.find('.microlight').append(
                                `<a class="debug-link" data-token="${token}" style="font-style: italic; color: white; text-decoration: none" href="${tok}?panel=${debug[key]}">${key.toUpperCase()}</a>`
                            ).append(index < arr.length - 1 ? ', ' : ' ');
                            ;
                        })
                    }, 200);
                },
            });
        };
    </script>
{% endblock swagger_initialization %}
<script src="{{ asset('assets/nelmio_api_doc/js/customazok_v2.js') }}"></script>
</body>
</html>
